<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊéíË°åÊ¶ú - Draw A Fish</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            min-height: 100vh;
            color: #333;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            color: #666;
        }

        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .tab-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-1px);
        }

        .content-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .rank-list {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .rank-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .rank-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .rank-item.top-3 {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 255, 255, 0.9));
        }

        .rank-item.rank-1 { border-left-color: #FFD700; }
        .rank-item.rank-2 { border-left-color: #C0C0C0; }
        .rank-item.rank-3 { border-left-color: #CD7F32; }

        .rank-number {
            font-size: 1.5em;
            font-weight: bold;
            margin-right: 15px;
            min-width: 40px;
            text-align: center;
        }

        .rank-1 .rank-number { color: #FFD700; }
        .rank-2 .rank-number { color: #C0C0C0; }
        .rank-3 .rank-number { color: #CD7F32; }

        .fish-image {
            width: 60px;
            height: 45px;
            object-fit: cover;
            border-radius: 8px;
            margin-right: 15px;
            border: 2px solid rgba(255, 255, 255, 0.5);
        }

        .fish-info {
            flex: 1;
        }

        .fish-name {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .fish-details {
            color: #666;
            font-size: 0.9em;
        }

        .fish-score {
            text-align: right;
            font-weight: bold;
            color: #667eea;
        }

        .score-number {
            font-size: 1.2em;
        }

        .statistics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            font-size: 1.1em;
            color: #666;
            margin-top: 5px;
        }

        .controls {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            color: #666;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }

        .empty-state img {
            width: 100px;
            height: 100px;
            opacity: 0.5;
            margin-bottom: 20px;
        }

        .filter-bar {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            backdrop-filter: blur(10px);
        }

        .filter-select {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .nav-tabs {
                margin: 10px;
            }
            
            .tab-btn {
                padding: 10px 18px;
                font-size: 14px;
            }
            
            .content-container {
                padding: 10px;
            }
            
            .rank-item {
                padding: 12px;
            }
            
            .fish-image {
                width: 50px;
                height: 37px;
            }
            
            .controls {
                top: 10px;
                right: 10px;
            }
            
            .control-btn {
                padding: 8px 16px;
                font-size: 14px;
            }
            
            .filter-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-input {
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üèÜ Draw A Fish ÊéíË°åÊ¶ú</h1>
        <p>Á§æÂå∫ÊúÄ‰Ω≥È±ºÁ±ªÁªòÁîª‰ΩúÂìÅÂ±ïÁ§∫</p>
    </div>

    <div class="nav-tabs">
        <button class="tab-btn active" onclick="switchTab('overall')">ÊÄªÊéíË°åÊ¶ú</button>
        <button class="tab-btn" onclick="switchTab('daily')">Êó•Ê¶ú</button>
        <button class="tab-btn" onclick="switchTab('weekly')">Âë®Ê¶ú</button>
        <button class="tab-btn" onclick="switchTab('species')">È±ºÁßçÊéíË°å</button>
    </div>

    <div class="controls">
        <button class="control-btn" onclick="refreshRankings()">Âà∑Êñ∞</button>
        <button class="control-btn" onclick="goHome()">ËøîÂõûÁîªÈ±º</button>
    </div>

    <div class="content-container">
        <!-- ÊÄªÊéíË°åÊ¶ú -->
        <div id="overall" class="tab-content active">
            <div class="statistics">
                <div class="stat-card">
                    <div class="stat-number" id="totalDrawings">1,234</div>
                    <div class="stat-label">ÊÄªÁªòÁîªÊï∞</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalUsers">567</div>
                    <div class="stat-label">ÂèÇ‰∏éÁî®Êà∑</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgScore">87.5</div>
                    <div class="stat-label">Âπ≥ÂùáËØÑÂàÜ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalSpecies">23</div>
                    <div class="stat-label">ËØÜÂà´È±ºÁßç</div>
                </div>
            </div>

            <div class="filter-bar">
                <label>ÊéíÂ∫èÊñπÂºè:</label>
                <select class="filter-select" id="sortBy">
                    <option value="score">ÊåâËØÑÂàÜ</option>
                    <option value="confidence">ÊåâÁΩÆ‰ø°Â∫¶</option>
                    <option value="time">ÊåâÊó∂Èó¥</option>
                </select>
                <label>È±ºÁßçÁ≠õÈÄâ:</label>
                <select class="filter-select" id="filterSpecies">
                    <option value="all">ÂÖ®ÈÉ®È±ºÁßç</option>
                    <option value="ÈáëÈ±º">ÈáëÈ±º</option>
                    <option value="ÁÉ≠Â∏¶È±º">ÁÉ≠Â∏¶È±º</option>
                    <option value="Â∞è‰∏ëÈ±º">Â∞è‰∏ëÈ±º</option>
                </select>
                <input type="text" class="search-input" placeholder="ÊêúÁ¥¢Áî®Êà∑..." id="searchUser">
            </div>

            <div class="rank-list" id="overallRankList">
                <div class="loading">Ê≠£Âú®Âä†ËΩΩÊéíË°åÊ¶úÊï∞ÊçÆ...</div>
            </div>
        </div>

        <!-- Êó•Ê¶ú -->
        <div id="daily" class="tab-content">
            <div class="rank-list" id="dailyRankList">
                <div class="loading">Ê≠£Âú®Âä†ËΩΩ‰ªäÊó•ÊéíË°åÊ¶ú...</div>
            </div>
        </div>

        <!-- Âë®Ê¶ú -->
        <div id="weekly" class="tab-content">
            <div class="rank-list" id="weeklyRankList">
                <div class="loading">Ê≠£Âú®Âä†ËΩΩÊú¨Âë®ÊéíË°åÊ¶ú...</div>
            </div>
        </div>

        <!-- È±ºÁßçÊéíË°å -->
        <div id="species" class="tab-content">
            <div class="rank-list" id="speciesRankList">
                <div class="loading">Ê≠£Âú®Âä†ËΩΩÈ±ºÁßçÊéíË°åÊ¶ú...</div>
            </div>
        </div>
    </div>

    <script>
        class RankingSystem {
            constructor() {
                this.currentTab = 'overall';
                this.rankingData = {};
                this.filteredData = [];
                this.init();
            }

            init() {
                this.loadRankingData();
                this.setupEventListeners();
                this.generateMockData();
            }

            setupEventListeners() {
                // Á≠õÈÄâÂíåÊéíÂ∫è‰∫ã‰ª∂
                document.getElementById('sortBy').addEventListener('change', () => {
                    this.applyFilters();
                });

                document.getElementById('filterSpecies').addEventListener('change', () => {
                    this.applyFilters();
                });

                document.getElementById('searchUser').addEventListener('input', () => {
                    this.applyFilters();
                });
            }

            async loadRankingData() {
                try {
                    // ‰ªélocalStorageÂíåÊúçÂä°Âô®Âä†ËΩΩÊï∞ÊçÆ
                    const localData = localStorage.getItem('fishDrawings');
                    if (localData) {
                        const drawings = JSON.parse(localData);
                        this.processDrawingData(drawings);
                    }
                    
                    // Ê®°ÊãüÂä†ËΩΩÁΩëÁªúÊï∞ÊçÆ
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    this.renderAllTabs();
                } catch (error) {
                    console.error('Âä†ËΩΩÊéíË°åÊ¶úÊï∞ÊçÆÂ§±Ë¥•:', error);
                    this.renderEmptyState();
                }
            }

            processDrawingData(drawings) {
                // Â§ÑÁêÜÁªòÁîªÊï∞ÊçÆÔºåËÆ°ÁÆóÊéíÂêç
                if (!Array.isArray(drawings)) {
                    drawings = [drawings];
                }

                this.rankingData.overall = drawings.map((drawing, index) => ({
                    rank: index + 1,
                    id: `drawing_${index}`,
                    userName: `Áî®Êà∑${Math.floor(Math.random() * 1000)}`,
                    species: drawing.species || 'Êú™Áü•È±ºÁ±ª',
                    confidence: drawing.confidence || Math.floor(Math.random() * 40) + 60,
                    score: this.calculateScore(drawing),
                    imageData: drawing.imageData,
                    timestamp: drawing.timestamp || Date.now(),
                    likes: Math.floor(Math.random() * 100),
                    comments: Math.floor(Math.random() * 20)
                }));

                // ÊåâËØÑÂàÜÊéíÂ∫è
                this.rankingData.overall.sort((a, b) => b.score - a.score);
                
                // Êõ¥Êñ∞ÊéíÂêç
                this.rankingData.overall.forEach((item, index) => {
                    item.rank = index + 1;
                });
            }

            calculateScore(drawing) {
                // Âü∫‰∫éÂ§ö‰∏™Âõ†Á¥†ËÆ°ÁÆóÁªºÂêàËØÑÂàÜ
                const confidence = drawing.confidence || 80;
                const timeBonus = drawing.timestamp ? Math.max(0, 10 - (Date.now() - drawing.timestamp) / (1000 * 60 * 60 * 24)) : 0;
                const randomFactor = Math.random() * 20;
                
                return Math.min(100, Math.round(confidence * 0.7 + timeBonus + randomFactor));
            }

            generateMockData() {
                // ÁîüÊàêÊ®°ÊãüÊéíË°åÊ¶úÊï∞ÊçÆ
                const species = ['ÈáëÈ±º', 'ÁÉ≠Â∏¶È±º', 'Â∞è‰∏ëÈ±º', 'È≤§È±º', 'ÊØîÁõÆÈ±º', 'È≤®È±º', 'È≤∏È±º', 'Êµ∑È©¨'];
                const adjectives = ['ÂèØÁà±ÁöÑ', '‰ºòÈõÖÁöÑ', 'Ê¥ªÊ≥ºÁöÑ', 'Á•ûÁßòÁöÑ', 'Áæé‰∏ΩÁöÑ', 'Âº∫Â£ÆÁöÑ', 'ÁÅµÂ∑ßÁöÑ'];
                
                if (!this.rankingData.overall || this.rankingData.overall.length < 10) {
                    this.rankingData.overall = [];
                    
                    for (let i = 0; i < 50; i++) {
                        const speciesName = species[Math.floor(Math.random() * species.length)];
                        const adj = adjectives[Math.floor(Math.random() * adjectives.length)];
                        
                        this.rankingData.overall.push({
                            rank: i + 1,
                            id: `mock_${i}`,
                            userName: `${adj}ÁîªÂÆ∂${String(i + 1).padStart(3, '0')}`,
                            species: speciesName,
                            confidence: Math.floor(Math.random() * 40) + 60,
                            score: Math.floor(Math.random() * 40) + 60,
                            imageData: this.generateMockFishImage(speciesName),
                            timestamp: Date.now() - Math.random() * 7 * 24 * 60 * 60 * 1000,
                            likes: Math.floor(Math.random() * 200),
                            comments: Math.floor(Math.random() * 50)
                        });
                    }
                    
                    this.rankingData.overall.sort((a, b) => b.score - a.score);
                    this.rankingData.overall.forEach((item, index) => {
                        item.rank = index + 1;
                    });
                }

                // ÁîüÊàêÊó•Ê¶úÂíåÂë®Ê¶úÊï∞ÊçÆ
                this.generatePeriodData();
                this.generateSpeciesData();
            }

            generatePeriodData() {
                const now = Date.now();
                const oneDayAgo = now - 24 * 60 * 60 * 1000;
                const oneWeekAgo = now - 7 * 24 * 60 * 60 * 1000;

                this.rankingData.daily = this.rankingData.overall
                    .filter(item => item.timestamp > oneDayAgo)
                    .slice(0, 20);

                this.rankingData.weekly = this.rankingData.overall
                    .filter(item => item.timestamp > oneWeekAgo)
                    .slice(0, 30);
            }

            generateSpeciesData() {
                const speciesMap = {};
                
                this.rankingData.overall.forEach(item => {
                    if (!speciesMap[item.species]) {
                        speciesMap[item.species] = {
                            species: item.species,
                            count: 0,
                            avgScore: 0,
                            bestScore: 0,
                            totalScore: 0,
                            imageData: item.imageData
                        };
                    }
                    
                    speciesMap[item.species].count++;
                    speciesMap[item.species].totalScore += item.score;
                    speciesMap[item.species].bestScore = Math.max(speciesMap[item.species].bestScore, item.score);
                });

                this.rankingData.species = Object.values(speciesMap)
                    .map((data, index) => ({
                        rank: index + 1,
                        species: data.species,
                        count: data.count,
                        avgScore: Math.round(data.totalScore / data.count),
                        bestScore: data.bestScore,
                        imageData: data.imageData
                    }))
                    .sort((a, b) => b.avgScore - a.avgScore)
                    .map((item, index) => ({ ...item, rank: index + 1 }));
            }

            generateMockFishImage(species) {
                const colors = {
                    'ÈáëÈ±º': '#FFD700',
                    'ÁÉ≠Â∏¶È±º': '#FF6B6B',
                    'Â∞è‰∏ëÈ±º': '#FF8C00',
                    'È≤§È±º': '#CD853F',
                    'ÊØîÁõÆÈ±º': '#DDA0DD',
                    'È≤®È±º': '#778899',
                    'È≤∏È±º': '#4682B4',
                    'Êµ∑È©¨': '#20B2AA'
                };
                
                const color = colors[species] || '#4ECDC4';
                
                const svg = `
                    <svg width="60" height="45" viewBox="0 0 60 45" xmlns="http://www.w3.org/2000/svg">
                        <ellipse cx="30" cy="22" rx="20" ry="12" fill="${color}" stroke="#333" stroke-width="1"/>
                        <polygon points="8,22 20,15 20,29" fill="${color}" stroke="#333" stroke-width="1"/>
                        <circle cx="35" cy="18" r="2" fill="#000"/>
                        <circle cx="36" cy="17" r="0.5" fill="#FFF"/>
                    </svg>
                `;
                
                return 'data:image/svg+xml;base64,' + btoa(svg);
            }

            renderAllTabs() {
                this.renderOverallRank();
                this.renderDailyRank();
                this.renderWeeklyRank();
                this.renderSpeciesRank();
                this.updateStatistics();
            }

            renderOverallRank() {
                const container = document.getElementById('overallRankList');
                this.applyFilters();
            }

            applyFilters() {
                const sortBy = document.getElementById('sortBy').value;
                const filterSpecies = document.getElementById('filterSpecies').value;
                const searchUser = document.getElementById('searchUser').value.toLowerCase();

                let data = [...this.rankingData.overall];

                // Â∫îÁî®Á≠õÈÄâ
                if (filterSpecies !== 'all') {
                    data = data.filter(item => item.species === filterSpecies);
                }

                if (searchUser) {
                    data = data.filter(item => item.userName.toLowerCase().includes(searchUser));
                }

                // Â∫îÁî®ÊéíÂ∫è
                switch (sortBy) {
                    case 'confidence':
                        data.sort((a, b) => b.confidence - a.confidence);
                        break;
                    case 'time':
                        data.sort((a, b) => b.timestamp - a.timestamp);
                        break;
                    default:
                        data.sort((a, b) => b.score - a.score);
                }

                this.filteredData = data;
                this.renderRankList('overallRankList', data);
            }

            renderRankList(containerId, data) {
                const container = document.getElementById(containerId);
                
                if (data.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3em;">üê†</div>
                            <h3>ÊöÇÊó†Êï∞ÊçÆ</h3>
                            <p>ËøòÊ≤°ÊúâÁ¨¶ÂêàÊù°‰ª∂ÁöÑÁªòÁîª‰ΩúÂìÅ</p>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = data.map((item, index) => {
                    const rankClass = index < 3 ? `top-3 rank-${index + 1}` : '';
                    const timeAgo = this.getTimeAgo(item.timestamp);
                    
                    return `
                        <div class="rank-item ${rankClass}" onclick="showDrawingDetail('${item.id}')">
                            <div class="rank-number">${index + 1}</div>
                            <img src="${item.imageData}" alt="${item.species}" class="fish-image" />
                            <div class="fish-info">
                                <div class="fish-name">${item.userName} - ${item.species}</div>
                                <div class="fish-details">
                                    ÁΩÆ‰ø°Â∫¶: ${item.confidence}% | 
                                    ${timeAgo} | 
                                    ‚ù§Ô∏è ${item.likes} | 
                                    üí¨ ${item.comments}
                                </div>
                            </div>
                            <div class="fish-score">
                                <div class="score-number">${item.score}</div>
                                <div>ÂàÜ</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderDailyRank() {
                this.renderRankList('dailyRankList', this.rankingData.daily);
            }

            renderWeeklyRank() {
                this.renderRankList('weeklyRankList', this.rankingData.weekly);
            }

            renderSpeciesRank() {
                const container = document.getElementById('speciesRankList');
                const data = this.rankingData.species;

                container.innerHTML = data.map((item, index) => {
                    const rankClass = index < 3 ? `top-3 rank-${index + 1}` : '';
                    
                    return `
                        <div class="rank-item ${rankClass}">
                            <div class="rank-number">${item.rank}</div>
                            <img src="${item.imageData}" alt="${item.species}" class="fish-image" />
                            <div class="fish-info">
                                <div class="fish-name">${item.species}</div>
                                <div class="fish-details">
                                    ‰ΩúÂìÅÊï∞Èáè: ${item.count} | 
                                    ÊúÄÈ´òÂàÜ: ${item.bestScore}ÂàÜ |
                                    ÂèÇ‰∏éÂ∫¶: ${Math.round(item.count / this.rankingData.overall.length * 100)}%
                                </div>
                            </div>
                            <div class="fish-score">
                                <div class="score-number">${item.avgScore}</div>
                                <div>Âπ≥ÂùáÂàÜ</div>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            updateStatistics() {
                const total = this.rankingData.overall.length;
                const users = new Set(this.rankingData.overall.map(item => item.userName)).size;
                const avgScore = Math.round(this.rankingData.overall.reduce((sum, item) => sum + item.score, 0) / total);
                const species = new Set(this.rankingData.overall.map(item => item.species)).size;

                document.getElementById('totalDrawings').textContent = total.toLocaleString();
                document.getElementById('totalUsers').textContent = users.toLocaleString();
                document.getElementById('avgScore').textContent = avgScore;
                document.getElementById('totalSpecies').textContent = species;
            }

            getTimeAgo(timestamp) {
                const now = Date.now();
                const diff = now - timestamp;
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor(diff / (1000 * 60));

                if (days > 0) return `${days}Â§©Ââç`;
                if (hours > 0) return `${hours}Â∞èÊó∂Ââç`;
                if (minutes > 0) return `${minutes}ÂàÜÈíüÂâç`;
                return 'ÂàöÂàö';
            }

            renderEmptyState() {
                const containers = ['overallRankList', 'dailyRankList', 'weeklyRankList', 'speciesRankList'];
                containers.forEach(id => {
                    const container = document.getElementById(id);
                    container.innerHTML = `
                        <div class="empty-state">
                            <div style="font-size: 3em;">üê†</div>
                            <h3>ÊöÇÊó†ÊéíË°åÊ¶úÊï∞ÊçÆ</h3>
                            <p>ÂºÄÂßãÁîªÈ±ºÊù•ÂàõÂª∫‰Ω†ÁöÑÁ¨¨‰∏Ä‰∏™‰ΩúÂìÅÂêßÔºÅ</p>
                        </div>
                    `;
                });
            }
        }

        // ÂÖ®Â±ÄÂáΩÊï∞
        function switchTab(tabName) {
            // Êõ¥Êñ∞Ê†áÁ≠æÈ°µ
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            window.ranking.currentTab = tabName;
        }

        function refreshRankings() {
            window.location.reload();
        }

        function goHome() {
            window.location.href = 'index.html';
        }

        function showDrawingDetail(drawingId) {
            // ÊòæÁ§∫ÁªòÁîªËØ¶ÊÉÖ
            const drawing = window.ranking.rankingData.overall.find(item => item.id === drawingId);
            if (drawing) {
                alert(`
                    ÁªòÁîªËØ¶ÊÉÖ:
                    ‰ΩúËÄÖ: ${drawing.userName}
                    È±ºÁßç: ${drawing.species}
                    ËØÑÂàÜ: ${drawing.score}ÂàÜ
                    ÁΩÆ‰ø°Â∫¶: ${drawing.confidence}%
                    ÁÇπËµûÊï∞: ${drawing.likes}
                    ËØÑËÆ∫Êï∞: ${drawing.comments}
                    Âàõ‰ΩúÊó∂Èó¥: ${new Date(drawing.timestamp).toLocaleString()}
                `);
            }
        }

        // ÂàùÂßãÂåñÊéíË°åÊ¶úÁ≥ªÁªü
        window.addEventListener('DOMContentLoaded', () => {
            window.ranking = new RankingSystem();
        });
    </script>
</body>
</html>